FROM node:10.16.0-alpine AS api
COPY source/. src/
WORKDIR /src
ENV MEMORY 2048
ENV DICOM_HOSTNAME="dicom-api"
ENV DICOM_REQUEST_PORT="8443"
ENV DICOM_TOKEN_PORT="8843"
ENV DICOM_SECRET="5a7def58-df35-412a-94fa-1d1fdf0f6000"
ENV AETS_NAME='DCM4CHEE'
ENV API_PORT="8080"
ENV NODE_TLS_REJECT_UNAUTHORIZED=0
CMD node --max-old-space-size=$MEMORY --optimize-for-size app.js
